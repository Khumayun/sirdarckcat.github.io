<script>
  if(!navigator.serviceWorker.controller || navigator.serviceWorker.controller.scriptURL.indexOf('/csp/sw.js') < 0) {
    navigator.serviceWorker.register('sw.js').then(function(){location.reload()});
  }
</script>
<meta http-equiv="content-security-policy" content="img-src https://www.google.com/search?this.is.ignored">
<img src="https://www.google.com/favicon.ico" alt="this should fail">
<img src="https://www.google.com/url?q=/favicon.ico" alt="this should fail">
<img src="https://www.google.com/search?q=foo" alt="this will return favicon.ico, should fail">
<img src="https://www.google.com/search?q=bar" alt="this will return a redirection to favicon.ico, should work">
<img src="https://www.google.com/search?q=baz" alt="this will return a redirection from google.ch to google.com/favicon.ico, should work">
